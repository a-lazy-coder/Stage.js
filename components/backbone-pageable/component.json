{
  "name": "backbone-pageable",
  "version": "0.9.13",
  "main": "lib/backbone-pageable.js",
  "dependencies": {
    "underscore": "~1.4.0",
    "backbone": "~0.9.2"
  },
  "gitHead": "ed760deebbce5ccf8602119f3c96c4c963348570",
  "readme": "backbone-pageable\n=================\n\n|travis-status|_\n\nA pageable, drop-in replacement for Backbone.Collection inspired by\n`Backbone.Paginator <https://github.com/addyosmani/backbone.paginator/>`_, but\nmuch better.\n\n.. contents:: Table of Contents\n\nAdvantages\n----------\n\nSupports client-side and server-side operations\n  You can initialize ``Backbone.PageableCollection`` to paginate and/or sort on\n  the client-side, server-side or both.\nInfinite paging\n  Many public APIs like `Github <http://developer.github.com/v3/#pagination>`_\n  or `Facebook\n  <https://developers.facebook.com/docs/reference/api/pagination/>`_ support\n  infinite paging, ``Backbone.PageableCollection`` can handle them easily.\nComes with reasonable defaults\n  Server API parameters preconfigured to work with most Rails RESTful APIs by\n  default.\nWorks well with existing server-side APIs\n  Query parameter mappings are all configurable, and you can use either 0-based\n  or 1-based indices.\nBi-directional event handling\n  In client-mode, any changes done on one page is immediately reflected on the\n  others with the appropriate events propagated.\n100% compatible with existing code\n  ``Backbone.PageableCollection`` is a strict superset of\n  ``Backbone.Collection`` and passes its `test suite\n  <http://wyuenho.github.com/backbone-pageable/test/index.html>`_.\nWell tested\n  Comes with 100s of tests in addition to the ``Backbone.Collection`` test\n  suite.\nWell documented\n  Use cases and functionality are thoroughly documented.\nNo surprising behavior\n  ``Backbone.PageableCollection`` performs internal state sanity checks at\n  appropriate times, so it is next to impossible to get into a weird state.\nLight-weight\n  Less than 2.9k minified and gzipped.\n\n\nInstallation\n------------\n\nInstalling from Node.js\n+++++++++++++++++++++++\n\n.. code-block:: bash\n\n  npm install backbone-pageable\n\n\nInstalling from Bower\n+++++++++++++++++++++\n\n.. code-block:: bash\n\n  bower install backbone-pageable\n\n\nBrowser\n+++++++\n\n.. code-block:: html\n\n  <script src=\"underscore.js\"></script>\n  <script src=\"backbone.js\"></script>\n  <script src=\"backbone-pageable.js\"></script>\n\n\nGetting to the Backbone.PageableCollection Class from Node.js and AMD\n+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++\n\n.. code-block:: javascript\n\n  var PageableCollection = require(\"backbone-pageable\");\n\n\nGetting to the Backbone.PageableCollection Class in the Browser\n+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++\n\n.. code-block:: javascript\n\n  var PageableCollection = Backbone.PageableCollection;\n\n\nIntroduction\n------------\n\nLike Backbone.Collection, you can provide a URL endpoint, configure your initial\npagination state and server API mapping by extending\n``Backbone.PageableCollection``:\n\n.. code-block:: javascript\n\n  var Book = Backbone.Model.extend({});\n\n  var Books = Backbone.PageableCollection.extend({\n    model: Book,\n    url: \"api.mybookstore.com/books\",\n\n    // Any `state` or `queryParam` you override in a subclass will be merged with\n    // the defaults in `Backbone.PageableCollection` 's prototype.\n    state: {\n\n      // You can use 0-based or 1-based indices, the default is 1-based.\n      // You can set to 0-based by setting ``firstPage`` to 0.\n      firstPage: 0,\n\n      // Set this to the initial page index if different from `firstPage`. Can\n      // also be 0-based or 1-based.\n      currentPage: 2,\n\n      // Required under server-mode\n      totalRecords: 200\n    },\n\n    // You can configure the mapping from a `Backbone.PageableCollection#state`\n    // key to the query string parameters accepted by your server API.\n    queryParams: {\n\n      // `Backbone.PageableCollection#queryParams` converts to ruby's\n      // will_paginate keys by default.\n      currentPage: \"current_page\",\n      pageSize: \"page_size\"\n    }\n  });\n\n\nYou can initialize ``state`` and ``queryParams`` from the constructor too:\n\n.. code-block:: javascript\n\n   var Books = Backbone.PageableCollection.extend({\n     model: Book,\n     url:\"api.mybookstore.com/books\"\n   });\n\n   var books = new Books([], {\n\n     // All the `state` and `queryParams` key value pairs are merged with\n     // the defaults too.\n     state: {\n       firstPage: 0,\n       currentPage: 0\n     },\n\n     queryParams: {\n       currentPage: \"current_page\",\n       pageSize: \"page_size\"\n     }\n   });\n\n\nAdapting to a Server API\n++++++++++++++++++++++++\n\nTo adapt to an existing server API that do not use ``will_paginate`` keys, you\ncan configure the ``queryParams`` object hash to map ``state`` keys to the query\nparameters your server will accept. Those query parameters will be in the query\nstring of the URL used for fetching. You can also put extra items into\n``queryParams`` and they will be in the query string as is. Setting ``null`` as\nthe value of any mapping will remove it from the query string. Finally, the\nvalues in the ``queryParams`` can be either a literal value or a parameter-less\nfunction that returns a value.\n\nThis is a listing of the default ``state`` and ``queryParam`` values.\n\n============ ===== ============= ============================\n    ``state``                   ``queryParams``\n------------------ ------------------------------------------\nAttribute    Value Attribute     Value\n============ ===== ============= ============================\nfirstPage    1\nlastPage     null\ncurrentPage  null  currentPage   \"page\"\npageSize     25    pageSize      \"per_page\"\ntotalPages   null  totalPages    \"total_pages\"\ntotalRecords null  totalRecords  \"total_entries\"\nsortKey      null  sortKey       \"sort_by\"\norder        -1    order         \"order\"\n\\                  directions    { \"-1\": \"asc\", \"1\": \"desc\" }\n============ ===== ============= ============================\n\nYou can consult the `API documentation\n<http://wyuenho.github.com/backbone-pageable/#!/api/Backbone.PageableCollection>`_\nfor a detailed explaination of these fields.\n\nFetching Data and Managing States\n+++++++++++++++++++++++++++++++++\n\nYou can access the pageable collection's internal state by looking at the\n``state`` object attached to it. This state object, however, is generally\nread-only after initialization. There are various methods to help you manage\nthis state, you should use them instead of manually modifying it. For the\nunusual circumstances where you need to modify the ``state`` object directly, a\nsanity check will be performed at the next time you perform any\npagination-specific operations to ensure internal state consistency.\n\n================== ===============================\nMethod             Use When\n================== ===============================\n``setPageSize``    Changing the page size\n``makeComparator`` Changing the sorting\n``switchMode``     Switching between modes\n``state``          Need to read the internal state\n``get*Page``       Need to go to a different page\n================== ===============================\n\nIn addition to the above methods, you can also synchronize the state with the\nserver during a fetch. ``Backbone.PageableCollection`` overrides the default\n`Backbone.Collection#parse <http://backbonejs.org/#Collection-parse>`_ method to\nsupport an additional response data structure that contains an object hash of\npagination state. The following is a table of the response data structure\nformats ``Backbone.PageableCollection`` accepts.\n\n============= ====================================\nWithout State With State\n============= ====================================\n[{}, {}, ...] [{ pagination state }, [{}, {} ...]]\n============= ====================================\n\nBootstrapping\n-------------\n\n``Backbone.PageableCollection`` is 100% compatible with ``Backbone.Collection``\n's interface, so you can bootstrap the models and supply a comparator to the\nconstructor just like you are used to:\n\n.. code-block:: javascript\n\n  // Bootstrap with just 1 page of data for server-mode, or all the pages for\n  // client-mode.\n  var books = new Books([\n    { name: \"A Tale of Two Cities\" },\n    { name: \"Lord of the Rings\" },\n    // ...\n  ], {\n    // Paginate and sort on the client side, default is `server`.\n    mode: \"client\",\n    // This will maintain the current page in the order the comparator defined\n    // on the client-side, regardless of modes.\n    comparator: function (model) { return model.get(\"name\"); }\n  });\n\n\nPagination\n----------\n\nServer-Mode\n+++++++++++\n\n``Backbone.Pagination`` defaults to server-mode, which means it only holds one\npage of data at a time. All of the ``get*page`` operations are done by\ndelegating to ``fetch``. They return a ``jqXHR`` in this mode.\n\n.. code-block:: javascript\n\n  books.getFirstPage();\n  books.getPreviousPage();\n  books.getNextPage();\n  books.getLastPage();\n\n  // All the `get*Page` methods under server-mode delegates to `fetch`, so you\n  // can attach a callback to the returned `jqXHR` objects' `done` event.\n  books.getPage(2).done(function () {\n    // do something ...\n  });\n\n\nAll of the ``get*Page`` methods accept the same options\n`Backbone.Collection#fetch <http://backbonejs.org/#Collection-fetch>`_ accepts\nunder server-mode.\n\nInfinite-Mode\n+++++++++++++\n\nInfinite paging mode is a special case of server mode. You cannot call\n``getPage`` directly with a page number under this mode as there is no notion of\na \"page number\". As a substitute, you have to make use of ``getFirstPage``,\n``getPreviousPage``, ``getNextPage``, and ``getLastPage``. For the same reason,\nmost of the ``state`` attribute is also meaningless under this mode. By default,\n``Backbone.PageableCollection`` parses the response headers to find out what the\n``first``, ``last``, ``next`` and ``prev`` links are. The parsed links are\navailable in the ``links`` field.\n\n.. code-block:: javascript\n\n   var Issue = Backbone.Model.extend({});\n\n   var Issues = Backbone.PageableCollection.extend({\n     model: Issue,\n     url: \"https://api.github.com/repos/documentclound/backbone/issues?state=closed\",\n     mode: \"infinite\"\n   });\n\n   var issues = new Issues();\n\n   issues.getFirstPage().done(function () {\n      // do something interesting...\n   });\n\nIf your server API does not return the links using the ``Link`` header like\n`Github <http://developer.github.com/v3/#pagination>`_ does, you can subclass\n``Backbone.PageableCollection`` to override the ``parseLinks`` methods to\nreturn a links object.\n\n.. code-block:: javascript\n\n   var FBComment = Backbone.Model.extend({});\n\n   var FBComments = Backbone.PageableCollection.extend({\n     model: FBComment,\n     url: \"https://graph.facebook.com/A_REALLY_LONG_FACEBOOK_OBJECT_ID\",\n     mode: \"infinite\",\n     // Set the indices to 0-based for Graph API.\n     state: {\n       firstPage: 0\n     },\n     queryParams: {\n       pageSize: \"limit\",\n       // Setting a parameter mapping value to null removes it from the query string\n       currentPage: null,\n       // Any extra query string parameters are sent as is, values can be functions,\n       // which will be bound to the pageable collection instance temporarily\n       // when called.\n       offset: function () { return this.state.currentPage * this.state.pageSize; }\n     },\n     // Return all the comments for this Facebook object\n     parse: function (resp) {\n       return resp.comments;\n     },\n     // Facebook's `paging` object is in the exact format\n     // `Backbone.PageableCollection` accepts.\n     parseLinks: function (resp, xhr) {\n       this.state.currentPage++;\n       return resp.comments.paging;\n     }\n   });\n\n\nClient-Mode\n+++++++++++\n\nClient-mode is a very convenient mode for paginating a handful of pages entirely\non the client side without going through the network page-by-page. This mode is\nbest suited if you only have a small number of pages so sending all of the data\nto the client is not too time-consuming.\n\n.. code-block:: javascript\n\n  var book = new Book([\n    // Bootstrap all the records for all the pages here\n  ], { mode: \"client\" });\n\n\nAll of the ``get*Page`` methods reset the pageable collection's data to the models\nbelonging to the current page and return the collection itself instead of a\n``jqXHR``.\n\n.. code-block:: javascript\n\n  // You can immediately operate on the collection without waiting for jQuery to\n  // call your `done` callback.\n  var json = JSON.stringify(books.getLastPage());\n\n  // You can force a fetch in client-mode to get the most updated data if the\n  // collection has gone stale.\n  books.getFirstPage({ fetch: true }).done(function () {\n    // ...\n  });\n\n\nSorting\n-------\n\nThere are three ways you can sort a pageable collection. You can sort on the\nclient-side by either supplying a ``comparator`` like you can do with a plain\n``Backbone.Collection``, by setting a ``sortKey`` and ``order`` to ``state``, or\ncall the convenient method ``makeComparator`` with a ``sortKey`` and ``order``\nat any time.\n\nEach sorting method is valid for both server-mode and client-mode\noperations. Both modes are capable of sorting on either the current page or all\nof the pages.\n\nThe following matrices will help you understand all of the different ways you\ncan sort on a pageable collection.\n\nServer-Mode\n+++++++++++\n\n+--------------+-----------------------------------------------+-------------------------------------+\n|              |Server-Current                                 |Server-Full                          |\n+==============+===============================================+=====================================+\n|comparator    | .. code-block:: javascript                    | N/A                                 |\n|              |                                               |                                     |\n|              |   var books = new Books([], {                 |                                     |\n|              |     comparator: function (l, r)  {            |                                     |\n|              |       var lv = l.get(\"name\");                 |                                     |\n|              |       var rv = r.get(\"name\");                 |                                     |\n|              |       if (lv == rv) return 0;                 |                                     |\n|              |       else if (lv < rv) return 1;             |                                     |\n|              |       else return -1;                         |                                     |\n|              |     }                                         |                                     |\n|              |   });                                         |                                     |\n|              |                                               |                                     |\n+--------------+-----------------------------------------------+-------------------------------------+\n|state         | N/A                                           | .. code-block:: javascript          |\n|              |                                               |                                     |\n|              |                                               |   // You need to bootstrap the      |\n|              |                                               |   // first page in a globally       |\n|              |                                               |   // sorted order                   |\n|              |                                               |   var books = new Books([], {       |\n|              |                                               |     state: {                        |\n|              |                                               |       sortKey: \"name\",              |\n|              |                                               |       order: 1                      |\n|              |                                               |     }                               |\n|              |                                               |   });                               |\n|              |                                               |   // Or perform a fetch using a     |\n|              |                                               |   // query string having the sort   |\n|              |                                               |   // key and order for a globally   |\n|              |                                               |   // sorted page                    |\n|              |                                               |   books.getPage(1);                 |\n|              |                                               |                                     |\n+--------------+-----------------------------------------------+-------------------------------------+\n|makeComparator| .. code-block:: javascript                    | N/A                                 |\n|              |                                               |                                     |\n|              |   var books = new Books([]);                  |                                     |\n|              |   var comp = books.makeComparator(\"name\", 1); |                                     |\n|              |   books.comparator = comp;                    |                                     |\n|              |                                               |                                     |\n|              |                                               |                                     |\n+--------------+-----------------------------------------------+-------------------------------------+\n\nClient-Mode\n+++++++++++\n\n+--------------+------------------------------------+---------------------------------------------+\n|              |Client-Current                      |Client-Full                                  |\n+==============+====================================+=============================================+\n|comparator    | Same as Server-Current. Set        | .. code-block:: javascript                  |\n|              | ``mode`` to ``\"client\"``.          |                                             |\n|              |                                    |   var books = new Books([], {               |\n|              |                                    |     comparator: function (l, r) {           |\n|              |                                    |       var lv = l.get(\"name\");               |\n|              |                                    |       var rv = r.get(\"name\");               |\n|              |                                    |       if (lv == rv) return 0;               |\n|              |                                    |       else if (lv < rv) return 1;           |\n|              |                                    |       else return -1;                       |\n|              |                                    |     },                                      |\n|              |                                    |     mode: \"client\",                         |\n|              |                                    |     full: true                              |\n|              |                                    |   });                                       |\n|              |                                    |                                             |\n+--------------+------------------------------------+---------------------------------------------+\n|state         | Same as Server-Full. Set           | .. code-block:: javascript                  |\n|              | ``mode`` to ``\"client\"``.          |                                             |\n|              |                                    |   var books = new Books([], {               |\n|              |                                    |     state: {                                |\n|              |                                    |       sortKey: \"name\",                      |\n|              |                                    |       order: 1                              |\n|              |                                    |     },                                      |\n|              |                                    |     mode: \"client\",                         |\n|              |                                    |     full: true                              |\n|              |                                    |   };                                        |\n|              |                                    |                                             |\n+--------------+------------------------------------+---------------------------------------------+\n|makeComparator| Same as Server-Current. Set        | .. code-block:: javascript                  |\n|              | ``mode`` to ``\"client\"``.          |                                             |\n|              |                                    |   var books = new Books([], {               |\n|              |                                    |     mode: \"client\",                         |\n|              |                                    |     full: true                              |\n|              |                                    |   });                                       |\n|              |                                    |   var comp = books.makeComparator(\"name\");  |\n|              |                                    |   books.fullCollection.comparator = comp;   |\n|              |                                    |                                             |\n+--------------+------------------------------------+---------------------------------------------+\n\nManipulation\n------------\n\nThis is one of the areas where ``Backbone.PageableCollection`` truely shines. A\n``Backbone.PageableCollection`` instance not only can do everything a plain\n``Backbone.Collection`` is can for the current page, in client-mode, it can also\nsynchronize changes and events across all of the pages. For example, you can add\nor remove a model from either a ``Backbone.PageableCollection`` instance, which\nis holding the current page, or the\n``Backbone.PageableCollection#fullCollection`` collection, which is a plain\n``Backbone.Collection`` holding the models for all of the pages, and the pages\nwill all update themselves to maintain within a page size. Any additions,\nremovals, resets, model attribute changes and synchronization actions are\ncommunicated between all the pages throught the two collections.\n\n.. code-block:: javascript\n\n   // The books collection is initialized to start at the first page.\n   var books = new Books([\n     // bootstrap with all of the models for all of the pages here\n   ], {\n     mode: \"client\"\n   });\n\n   // A book is added to the end of the current page, which will overflow to the\n   // next page and trigger an `add` event on `fullCollection`.\n   books.push({ name: \"The Great Gatsby\"});\n\n   books.fullCollection.at(books.state.currentPage - 1 * books.state.pageSize).get(\"name\");\n   >>> \"The Great Gatsby\"\n\n   // Add a new book to the beginning of the first page.\n   books.fullCollection.unshift({ name: \"Oliver Twist\" });\n   books.at(0).get(\"name\");\n   >>> \"Oliver Twist\"\n\nAPI Reference\n-------------\n\nSee `here <http://wyuenho.github.com/backbone-pageable/>`_.\n\nFAQ\n---\n\n#. Why another paginator?\n\n   This project was born out of the needs for a backing model for\n   `Backgrid.Paginator <http://wyuenho.github.com/backgrid/#api-paginator>`_ -\n   an extension for the `Backgrid.js <http://wyuenho.github.com/backgrid/>`_\n   project. The project needed a smart and intuitive model that is\n   well-documented and well-tested to manage the paginator view. Upon examining\n   the popular project `Backbone.Paginator\n   <https://github.com/addyosmani/backbone.paginator/>`_, the author has\n   concluded that it does not satisfy the above requirements. Furthermore, the\n   progress of the the project is too slow. The author hopes to reinvent a\n   better wheel that is better suited and supported for `Backgrid.js\n   <http://wyuenho.github.com/backgrid/>`_.\n\n#. Which package managers does backbone-pageable support?\n\n   bower, CommonJS and AMD as of 0.9.0.\n\n#. Why doesn't backbone-pageable support filtering?\n\n   Wheels should be reinvented only when they are crooked. backbone-pageable aims\n   to do one thing only and does it well, which is pagination and sorting. Besides,\n   since Backbone.PageableCollection is 100% compatible with Backbone.Collection,\n   you can do filtering fairly easily with Backbone's built-in support for\n   Underscore.js methods.\n\nChange Log\n----------\n\n0.9.13\n  Bugs Fixed\n    - ``pageSize`` cannot be larger than ``totalRecords``.\n    - Off by 1 problem when shifting a model to the current page after removing\n      from ``fullCollection``.\n    - ``RangeError`` when removing the last element from the last page when\n      ``totalPages`` is > 1.\n\n0.9.12\n  Enhancements\n    - Switching modes now resets the states by default.\n    - Infinite mode now updates ``currentPage`` as well.\n  Bugs Fixed\n    - ``state`` counters will now update automatically under client mode.\n\n0.9.11\n  Changed\n    - ``links.first`` and ``links.next`` is now initialized to ``url`` for\n      infinite mode. Calling ``fetch`` in infinite mode is now equivalent to\n      calling ``getNextPage``.\n\n0.9.10\n  Bugs Fixed\n    - The initial call to ``getFirstPage`` will no longer fail under\n      infinite-mode and will now default to fetch from the collection's ``url``.\n    - Function values in ``queryParams`` now has ``this`` bound to the\n      collection instance when called.\n\n0.9.9\n  Changed\n    - ``switchMode`` now accepts a ``mode`` as the first parameter.\n    - ``state.isClientMode`` is removed. There is now a new\n      ``Backbone.PageableCollection#mode`` attribute for this purpose.\n    - ``queryParams.totalRecords`` now maps to ``\"total_entries\"``.\n    - ``queryParams.directions`` now maps to ``{\"-1\": \"asc\", \"1\": \"desc\"}``.\n\n  Enhancements\n    - Support extra ``queryParam`` parameters and function values.\n    - Infinite paging.\n\n0.9.2\n  This release is tested against Backbone.js 0.9.2 and 0.9.9.\n\n  Enhancements\n    - ``currentPage`` defaults to ``firstPage``.\n\n0.9.1\n  Bugs Fixed\n    - Instantiating a ``PageableCollection`` in client-mode without giving it\n      any models no longer throws errors.\n  Enhancements\n    - Overriding ``state`` and ``queryParams`` in a subclass's prototype now\n      merge with the defaults in ``Backbone.PageableCollection.prototype``.\n    - fullCollection now respect the parent's prototype.\n\n0.9.0\n  Initial release\n\n\nLegal\n-----\n\nCopyright (c) 2013 Jimmy Yuen Ho Wong\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of\nthis software and associated documentation files (the \"Software\"), to deal in\nthe Software without restriction, including without limitation the rights to\nuse, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of\nthe Software, and to permit persons to whom the Software is furnished to do so,\nsubject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS\nFOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR\nCOPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\nIN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\nCONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n.. |travis-status| image:: https://travis-ci.org/wyuenho/backbone-pageable.png\n.. _travis-status: https://travis-ci.org/wyuenho/backbone-pageable\n",
  "readmeFilename": "README.rst",
  "_id": "backbone-pageable@0.9.13",
  "description": "backbone-pageable =================",
  "repository": {
    "type": "git",
    "url": "git://github.com/wyuenho/backbone-pageable.git"
  }
}